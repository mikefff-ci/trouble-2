version: 2.1

orbs:
  docker-cpu-profiling: mkly/docker-cpu-profiling@dev:awkjq7

jobs:
  cpu:
    docker:
      - image: circleci/python:3.7
    steps:
      - checkout
      - docker-cpu-profiling/profile:
          start_delay: 1
      - run:
          command: |
            sleep 1
            pip install -r requirements.txt
            sleep 5

workflows:
  wf:
    jobs:
      - cpu
