version: 2.1

workflows:
  testing:
    jobs:
      - testing

jobs:
  testing:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run: netstat -ltpa
      - run: |
          echo $CIRCLE_PR_NUMBER
          if [ ! -z "$CIRCLE_PR_NUMBER" ] ; then
            echo "Inside"
            resp=$(curl -Ls "https://api.github.com/repos/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}/pulls/${CIRCLE_PR_NUMER}")
            echo $resp
            head_ref=$(jq -r .head.ref \<<< $resp)
            echo $head_ref
            git diff --name-only ${CIRCLE_BRANCH}..${head_ref}
          fi
