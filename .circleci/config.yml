version: 2.1

jobs:
  testcache:
    docker:
      - image: circleci/python:3.7
    steps:
      - restore_cache:
          key: v1-packages+datasets-U3h5YwdTXfPsjYsVouLcVkFBnD0wYM_jIjjA+pc_jx9=
      - run:  |
          mkdir -p ~/test/
          ls -lh ~/test/
          head -c 1G </dev/urandom > ~/bigfile1.txt
          truncate -s 1G ~/bigfile2.txt
          cat ~/bigfile1.txt ~/bigfile2.txt > ~/test/bigfile.txt
          ls -lh ~/test/
      - save_cache:
          key: v1-packages+datasets-U3h5YwdTXfPsjYsVouLcVkFBnD0wYM_jIjjA+pc_jx9=
          paths:
            - ~/test/
    
workflows:
  default-ci-workflow:
    jobs:
      - testcache
